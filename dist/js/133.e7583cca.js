"use strict";(self["webpackChunksopimem"]=self["webpackChunksopimem"]||[]).push([[133],{7133:function(e,a,l){l.r(a),l.d(a,{default:function(){return Y}});var t=l(6252),n=l(3577);const r=e=>((0,t.dD)("data-v-5091480e"),e=e(),(0,t.Cn)(),e),o={class:"grid"},i={class:"col-12"},c={class:"card"},u={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},s=r((()=>(0,t._)("h5",{class:"m-0"},"Clients",-1))),d={class:"block mt-2 md:mt-0 p-input-icon-left"},p=r((()=>(0,t._)("i",{class:"pi pi-search"},null,-1))),m={class:"row"},h={class:"col-12"},_=r((()=>(0,t._)("br",null,null,-1))),v=r((()=>(0,t._)("br",null,null,-1))),f={class:"p-fluid grid"},b={class:"field col-6"},w={class:"p-float-label"},g=r((()=>(0,t._)("label",{for:"name"},"Numéro de la facture ",-1))),y={class:"field col-6"},T={class:"p-float-label"},x=r((()=>(0,t._)("label",{for:"name"},"Nombre de tranche ",-1))),C={class:"field col-6"},V={class:"p-float-label"},W=r((()=>(0,t._)("label",null,"Experation du contrat",-1))),D={class:"field col-6"},k={class:"p-float-label"},S=r((()=>(0,t._)("label",{for:"name"},"N° Tranche Précédente ",-1))),I={class:"field col-6"},P={class:"p-float-label"},H=r((()=>(0,t._)("label",null,"Prochaine Rendez-vous Prévue",-1))),F={class:"field col-6"},R={class:"p-float-label"},U=r((()=>(0,t._)("label",{for:"name"},"Montant Prevus ",-1))),B={class:"field col-6"},L={class:"p-float-label"},N=r((()=>(0,t._)("label",null,"Prochaine Rendez-vous Réaliser",-1))),j={class:"field col-6"},Z={class:"p-float-label"},A=r((()=>(0,t._)("label",{for:"name"},"Montant Réaliser ",-1)));function z(e,a,l,r,z,E){const M=(0,t.up)("Toast"),O=(0,t.up)("SelectButton"),q=(0,t.up)("InputText"),K=(0,t.up)("Column"),G=(0,t.up)("ProgressBar"),J=(0,t.up)("SplitButton"),Q=(0,t.up)("DataTable"),X=(0,t.up)("ConfirmDialog"),Y=(0,t.up)("AuthorsTable"),$=(0,t.up)("Dialog"),ee=(0,t.up)("Calendar"),ae=(0,t.up)("InputNumber"),le=(0,t.up)("Button");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("div",i,[(0,t._)("div",c,[(0,t.Wm)(M),(0,t.Wm)(Q,{ref:"dt",value:r.originalClient,dataKey:"id",paginator:!0,rows:10,filters:r.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} products",responsiveLayout:"scroll"},{header:(0,t.w5)((()=>[(0,t._)("div",u,[s,(0,t._)("span",d,[p,(0,t.Wm)(q,{modelValue:r.filters["global"].value,"onUpdate:modelValue":a[2]||(a[2]=e=>r.filters["global"].value=e),placeholder:"Search..."},null,8,["modelValue"])])])])),default:(0,t.w5)((()=>[(0,t.Wm)(O,{modelValue:r.modeSearch,"onUpdate:modelValue":a[0]||(a[0]=e=>r.modeSearch=e),onChange:a[1]||(a[1]=e=>r.filterCollumn()),options:r.options,"aria-labelledby":"single"},null,8,["modelValue","options"]),(0,t.Wm)(K,{header:"N°Facture",field:"num_facture",sortable:!0}),(0,t.Wm)(K,{header:"Nom",field:"client.nom",sortable:!0}),(0,t.Wm)(K,{header:"Prenom",field:"client.prenom",sortable:!0}),(0,t.Wm)(K,{style:(0,n.j5)(r.showapprtement?"":"display: none"),field:"appartement.type",header:"Type app",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},null,8,["style"]),(0,t.Wm)(K,{style:(0,n.j5)(r.showapprtement?"":"display: none"),field:"appartement.num_lot",header:"N° Lot",sortable:!0,headerStyle:"width:14%; min-width:8rem;"},null,8,["style"]),(0,t.Wm)(K,{style:(0,n.j5)(r.showapprtement?"":"display: none"),field:"appartement.box.num_place",header:"Box",sortable:!0,headerStyle:"width:14%; min-width:8rem;"},null,8,["style"]),(0,t.Wm)(K,{style:(0,n.j5)(r.showbox?"":"display: none"),field:"box.num_place",header:"Box",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},null,8,["style"]),(0,t.Wm)(K,{style:(0,n.j5)(r.showlocale?"":"display: none"),field:"locale.num_place",header:"locale",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},null,8,["style"]),(0,t.Wm)(K,{header:"Avancement",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:(0,t.w5)((e=>[(0,t._)("div",null,[(0,t.Wm)(G,{value:e.data.tranches_data.length<=0?100:r.calculePocentage(e.data.tranches_data)},null,8,["value"])])])),_:1}),(0,t.Wm)(K,{headerStyle:"min-width:10rem;",header:"Opérations"},{body:(0,t.w5)((e=>[(0,t.Wm)(J,{style:{direction:"ltr"},onClick:a=>r.editclient(e.data),label:"Détails",icon:"pi pi-eye",model:[{label:"Tranche",icon:"pi pi-plus",command:()=>{!(e.data.last_tranche.length<=0)&&r.showDialogueTranche(e.data)}},{label:"Delete",icon:"pi pi-trash",command:()=>{r.deleteCanvaConfirm(e.data)}}],class:"p-button-outlined p-button-secondary mb-2"},null,8,["onClick","model"])])),_:1})])),_:1},8,["value","filters"]),(0,t.Wm)(M),(0,t.Wm)(X),(0,t.Wm)($,{visible:r.clientDialog,"onUpdate:visible":a[3]||(a[3]=e=>r.clientDialog=e),style:{width:"90%"},header:"",modal:!0,class:"p-fluid"},{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t._)("div",h,[(0,t.Wm)(Y,{client:r.client_edit,editclient:r.editclient,listeFactureClient:r.listeFactureClient,clientDialog:r.clientDialog},null,8,["client","editclient","listeFactureClient","clientDialog"])])])])),_:1},8,["visible"]),(0,t.Wm)($,{visible:r.showTrancheInput,"onUpdate:visible":a[15]||(a[15]=e=>r.showTrancheInput=e),style:{width:"750px"},header:"Renseignements Logement",modal:!0,class:"p-fluid"},{footer:(0,t.w5)((()=>[(0,t.Wm)(le,{label:"Annuler",icon:"pi pi-check",class:"p-button-text",onClick:a[13]||(a[13]=e=>r.cancelTranche())}),(0,t.Wm)(le,{label:"Enregestrer",icon:"pi pi-check",class:"p-button-text",onClick:a[14]||(a[14]=e=>r.addTranche(r.dataTranche))})])),default:(0,t.w5)((()=>[_,v,(0,t._)("div",f,[(0,t._)("div",b,[(0,t._)("span",w,[(0,t.Wm)(q,{disabled:!0,id:"name",modelValue:r.dataTranche.num_facture,"onUpdate:modelValue":a[4]||(a[4]=e=>r.dataTranche.num_facture=e)},null,8,["modelValue"]),g])]),(0,t._)("div",y,[(0,t._)("span",T,[(0,t.Wm)(q,{inputId:"mile",disabled:!0,id:"name",modelValue:r.dataTranche.new_tranche.nbr_tranche,"onUpdate:modelValue":a[5]||(a[5]=e=>r.dataTranche.new_tranche.nbr_tranche=e)},null,8,["modelValue"]),x])]),(0,t._)("div",C,[(0,t._)("span",V,[0===r.dataTranche.last_tranche.length?((0,t.wg)(),(0,t.j4)(ee,{key:0,modelValue:r.dataTranche.fin_contrat,"onUpdate:modelValue":a[6]||(a[6]=e=>r.dataTranche.fin_contrat=e),showIcon:!0,dateFormat:"dd-mm-yy"},null,8,["modelValue"])):((0,t.wg)(),(0,t.j4)(q,{key:1,disabled:!0,modelValue:r.dataTranche.fin_contrat,"onUpdate:modelValue":a[7]||(a[7]=e=>r.dataTranche.fin_contrat=e),showIcon:!0,dateFormat:"dd-mm-yy"},null,8,["modelValue"])),W])]),(0,t._)("div",D,[(0,t._)("span",k,[(0,t.Wm)(ae,{inputId:"horizontal",min:r.dataTranche.new_tranche.nbr_tranche,max:r.dataTranche.new_tranche.nbr_tranche,modelValue:r.dataTranche.new_tranche.num_tranche,"onUpdate:modelValue":a[8]||(a[8]=e=>r.dataTranche.new_tranche.num_tranche=e),showButtons:"",buttonLayout:"horizontal",step:1,decrementButtonClass:"p-button-danger",incrementButtonClass:"p-button-success",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"},null,8,["min","max","modelValue"]),S])]),(0,t._)("div",I,[(0,t._)("span",P,[(0,t.Wm)(ee,{modelValue:r.dataTranche.new_tranche.prochaine_rdv_prevue,"onUpdate:modelValue":a[9]||(a[9]=e=>r.dataTranche.new_tranche.prochaine_rdv_prevue=e),showIcon:!0,dateFormat:"dd-mm-yy"},null,8,["modelValue"]),H])]),(0,t._)("div",F,[(0,t._)("span",R,[(0,t.Wm)(ae,{inputId:"horizontal",min:0,modelValue:r.dataTranche.new_tranche.prix_prevue,"onUpdate:modelValue":a[10]||(a[10]=e=>r.dataTranche.new_tranche.prix_prevue=e),mode:"currency",currency:"DZD"},null,8,["modelValue"]),U])]),(0,t._)("div",B,[(0,t._)("span",L,[(0,t.Wm)(ee,{modelValue:r.dataTranche.new_tranche.prochaine_rdv_realise,"onUpdate:modelValue":a[11]||(a[11]=e=>r.dataTranche.new_tranche.prochaine_rdv_realise=e),showIcon:!0,dateFormat:"dd-mm-yy"},null,8,["modelValue"]),N])]),(0,t._)("div",j,[(0,t._)("span",Z,[(0,t.Wm)(ae,{inputId:"mile",min:0,id:"name",modelValue:r.dataTranche.new_tranche.prix_realise,"onUpdate:modelValue":a[12]||(a[12]=e=>r.dataTranche.new_tranche.prix_realise=e),mode:"currency",currency:"DZD"},null,8,["modelValue"]),A])])])])),_:1},8,["visible"])])])])}var E=l(2262),M=(l(4294),l(6844)),O=l(9201),q=l(1039),K=l(7877),G=l(6358),J={components:{AuthorsTable:M.Z},setup(){const e=(0,E.iH)([]),a=(0,E.iH)("appartement"),l=(0,E.iH)(["appartement","box","locale"]),n=(0,E.iH)(new Date),r=(0,E.iH)(new Date),o=(0,E.iH)(!1),i=(0,q.N)(),c=(0,O.p)(),u=(0,E.iH)(!1),s=(0,E.iH)(50),d=(0,E.iH)(),p=(0,E.iH)({global:{value:null,matchMode:G.a6.CONTAINS}});function m(e){e={...e},0==e.tranches_data.length&&e.tranches_data.push({fact_client:e.id,num_tranche:1,prix_prevue:e.prix_HT,prix_realise:e.prix_HT,prochaine_rdv_prevue:e.contrat_du,prochaine_rdv_realise:e.contrat_du}),d.value=e,u.value=!0}const h=(0,E.iH)(e.value);function _(){K.Z.get("/facture-client/?canvas=true&limit=100").then((l=>{if(e.value=l.data,null!=localStorage.getItem("tablesRowsFacture"))switch(a.value=localStorage.getItem("tablesRowsFacture"),a.value){case"appartement":h.value=e.value.filter((function(e){if(null!=e.appartement)return e}));break;case"locale":h.value=e.value.filter((function(e){if(null!=e.locale)return e}));break;case"box":h.value=e.value.filter((function(e){if(null!=e.box)return e}));break;default:h.value=e.value.filter((function(e){if(null!=e.appartement)return e}));break}else h.value=e.value.filter((function(e){if(null!=e.appartement)return e}))})).catch((e=>{console.log(e.response.data)}))}const v=(0,E.iH)(!1);function f(e){console.log("editable",e),v.value=!0}function b(){K.Z.put("/facture-client/",{params:{id:product.id}}).then((e=>{console.log(e.data),_(),c.add({severity:"success",summary:"Successful",detail:"Canva Deleted",life:3e3})})).catch((e=>console.log(e)))}function w(e){console.log("pppp",e),K.Z["delete"]("/facture-client/",{params:{id:e.id}}).then((e=>{console.log(e.data),_(),c.add({severity:"success",summary:"Successful",detail:"Canva Deleted",life:3e3})})).catch((e=>console.log(e)))}function g(e){i.require({message:"Are you sure you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{w(e)},reject:()=>{c.add({severity:"success",summary:"Successful",detail:"cancel operation",life:3e3})}})}const y=(0,E.iH)(!0),T=(0,E.iH)(!1),x=(0,E.iH)(!1);function C(e){return e.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})}const V=(0,E.iH)(),W=(0,E.iH)({nbr_tranche:"",num_tranche:0,fact_client:"",prix_prevue:0,prochaine_rdv_prevue:new Date,prix_realise:0,prochaine_rdv_realise:new Date});function D(e){V.value=e;var a=e.tranches_data.length+1,l=e.tranches_data.length+1,t=V.value.last_tranche.fact_client;V.value["new_tranche"]=W,V.value.new_tranche.prochaine_rdv_prevue=V.value.last_tranche.prochaine_rdv_prevue,V.value.new_tranche.prix_prevue=V.value.last_tranche.prix_prevue,V.value.new_tranche.nbr_tranche=parseInt(a),V.value.new_tranche.num_tranche=parseInt(l),V.value.new_tranche.fact_client=t,o.value=!0}function k(){switch(h.value=e.value,a.value){case"appartement":localStorage.setItem("tablesRowsFacture","appartement"),y.value=!0,T.value=!1,x.value=!1,h.value=e.value.filter((function(e){if(null!=e.appartement)return e}));break;case"locale":localStorage.setItem("tablesRowsFacture","locale"),T.value=!0,y.value=!1,x.value=!1,h.value=e.value.filter((function(e){if(null!=e.locale)return e}));break;case"box":localStorage.setItem("tablesRowsFacture","box"),y.value=!1,T.value=!1,x.value=!0,h.value=e.value.filter((function(e){if(null!=e.box)return e}));break;default:a.value="appartement",y.value=!0,T.value=!1,x.value=!1,h.value=e.value.filter((function(e){if(null!=e.appartement)return e}));break}}function S(){V.value.new_tranche={}}function I(e){console.log("dataTranche------W",e),K.Z.post("/tranches/",e.new_tranche).then((e=>{_(),c.add({severity:"success",summary:"Successful",detail:"Canva Deleted",life:3e3}),o.value=!1})).catch((e=>console.log(e)))}function P(e){let a=e.length,l=[];return e.forEach((e=>{e.prix_realise>=e.prix_prevue&&l.push(e)})),parseFloat(l.length/a*100).toFixed(2)}return(0,t.bv)((()=>{let e=1;console.log(e+=1,"eeeeeeeee"),_()})),{calculePocentage:P,clients:e,showapprtement:y,showlocale:T,showbox:x,filterCollumn:k,options:l,listeFactureClient:_,editingDialogue:b,modeSearch:a,client_edit:d,editCanva:f,editclient:m,showTrancheInput:o,dataTranche:V,prochaine_rdv_realise:n,prochaine_rdv_prevue:r,deleteCanvaConfirm:g,filters:p,value:s,clientDialog:u,originalClient:h,addTranche:I,formatDate:C,showDialogueTranche:D,cancelTranche:S}}},Q=l(3744);const X=(0,Q.Z)(J,[["render",z],["__scopeId","data-v-5091480e"]]);var Y=X}}]);
//# sourceMappingURL=133.e7583cca.js.map