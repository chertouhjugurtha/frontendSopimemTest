"use strict";(self["webpackChunksopimem"]=self["webpackChunksopimem"]||[]).push([[504],{7504:function(e,l,t){t.r(l),t.d(l,{default:function(){return we}});var a=t(6252),s=t(9963),i=t(3577);const o={class:"grid"},n={class:"col-12 xl:col-12"},r={class:"card"},c={class:"flex align-items-center justify-content-between mb-4"},u={class:"p-buttonset"},d={class:"field col",style:{overflow:"auto"}},m=(0,a._)("br",null,null,-1),p=(0,a._)("br",null,null,-1),_={key:0,class:"field col"},v={class:"p-float-label"},b={key:0,class:"p-error"},g={key:1,class:"field col"},f={class:"p-float-label"},w={key:0,class:"p-error"},y={class:"field col"},$={class:"p-float-label"},k={key:0,class:"p-error"},C={class:"field col"},h={class:"ql-formats"},j={key:0,class:"ql-header"},q=(0,a.Uk)("الرؤوس "),D=[q],L={key:1,class:"ql-header"},U=(0,a.Uk)("En-têtes "),V=[U],S={key:2,class:"ql-header"},E=(0,a.Uk)("Headers "),x=[E],H=(0,a.Uk)("  "),B={class:"ql-formats"},A={class:"ql-bold"},W={class:"ql-italic"},O={class:"ql-underline"},z={class:"ql-list",value:"ordered"},M={class:"ql-list",value:"bullet"},N={class:"ql-align ql-picker ql-icon-picker"},F={class:"ql-link"},P={key:3,class:"p-error"},I={class:"field col-12 md:col-3"},T={class:"p-label p-button p-component p-button-outlined p-button-secondary mr-2",draggable:"true"},K={key:0,for:"files",style:{display:"block",cursor:"pointer"}},R=(0,a._)("i",{class:"pi pi-fw pi-paperclip"},null,-1),Y=(0,a.Uk)("المرفقات"),Z=[R,Y],X={key:1,for:"files",style:{display:"block",cursor:"pointer"}},G=(0,a._)("i",{class:"pi pi-fw pi-paperclip"},null,-1),J=(0,a.Uk)("Pièces jointes"),Q=[G,J],ee={key:2,for:"files",style:{display:"block",cursor:"pointer"}},le=(0,a._)("i",{class:"pi pi-fw pi-paperclip"},null,-1),te=(0,a.Uk)("Attachements"),ae=[le,te],se={class:"field col"},ie=["onClick"];function oe(e,l,t,q,U,E){const R=(0,a.up)("ConfirmDialog"),Y=(0,a.up)("SplitButton"),G=(0,a.up)("Button"),J=(0,a.up)("router-link"),le=(0,a.up)("router-view"),te=(0,a.up)("AutoComplete"),oe=(0,a.up)("Dropdown"),ne=(0,a.up)("InputText"),re=(0,a.up)("Editor"),ce=(0,a.up)("Message"),ue=(0,a.up)("Chip"),de=(0,a.up)("Dialog"),me=(0,a.up)("Toast"),pe=(0,a.Q2)("tooltip");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(R),(0,a._)("div",o,[(0,a.wy)((0,a._)("div",n,[(0,a._)("div",r,[(0,a._)("div",c,[(0,a._)("div",null,["details"!=q.nameroot?((0,a.wg)(),(0,a.j4)(Y,{key:0,style:{direction:"ltr"},label:"Nouveau message",icon:"pi pi-eye",model:[{label:"Clients",icon:"pi pi-plus",command:()=>{q.openComposeDialog(q.compose,"clients")}},{label:"Direction Interne",icon:"pi pi-plus",command:()=>{q.openComposeDialog(q.compose,"interne")}}],class:"p-button-rounded p-button-outlined p-button-danger"},null,8,["model"])):(0,a.kq)("",!0)]),(0,a._)("div",null,[(0,a._)("span",u,[(0,a.Wm)(J,{to:{name:"inbox"}},{default:(0,a.w5)((()=>[(0,a.Wm)(G,{icon:"pi pi-inbox",label:"Inbox",class:"p-button-outlined mr-2 mb-2"})])),_:1}),(0,a.Wm)(J,{to:{name:"sent"}},{default:(0,a.w5)((()=>[(0,a.Wm)(G,{icon:"pi pi-send",label:"Sent",class:"p-button-outlined mr-2 mb-2"})])),_:1})])])]),(0,a._)("div",d,[(0,a.Wm)(le,{name:"inboxsent"}),m])])],512),[[s.F8,!q.showDetails]]),(0,a.Wm)(de,{visible:q.compose,"onUpdate:visible":l[8]||(l[8]=e=>q.compose=e),style:{width:"750px"},header:"ar"==q.localeLang?"رسالة جديدة":"fr"==q.localeLang?"Nouveau message ":"New message",modal:!0,class:"p-fluid"},{footer:(0,a.w5)((()=>[(0,a.Wm)(G,{label:e.cancel_t,icon:"pi pi-times",class:"p-button-text",onClick:l[7]||(l[7]=e=>q.cancelCompose(q.compose))},null,8,["label"]),(0,a.Wm)(G,{label:e.save_t,icon:"pi pi-check",class:"p-button-text",onClick:q.setNewMessage},null,8,["label","onClick"])])),default:(0,a.w5)((()=>[p,"clients"===q.typeEmail?((0,a.wg)(),(0,a.iD)("div",_,[(0,a._)("span",v,[(0,a.Wm)(te,{modelValue:q.v$.email.$model,"onUpdate:modelValue":l[0]||(l[0]=e=>q.v$.email.$model=e),optionLabel:"emailClient",optionValue:"emailClient",suggestions:q.filteredClients,onComplete:q.search,debounce:500},null,8,["modelValue","suggestions","onComplete"]),(0,a._)("label",{for:"email",class:(0,i.C_)({"p-error":q.v$.email.$invalid&&q.submitted})},"E-mail Clients",2)]),q.v$.email.$invalid&&q.submitted||q.v$.email.$pending.$response?((0,a.wg)(),(0,a.iD)("small",b,(0,i.zw)(q.v$.email.required.$message.replace("Value","email")),1)):(0,a.kq)("",!0)])):"interne"===q.typeEmail?((0,a.wg)(),(0,a.iD)("div",g,[(0,a._)("span",f,["ar"==q.localeLang?((0,a.wg)(),(0,a.j4)(oe,{key:0,id:"email",modelValue:q.v$.email.$model,"onUpdate:modelValue":l[1]||(l[1]=e=>q.v$.email.$model=e),filter:!0,optionLabel:"destination_ar",options:q.directions,class:(0,i.C_)({"p-invalid":q.v$.email.$invalid&&q.submitted})},null,8,["modelValue","options","class"])):"en"==q.localeLang?((0,a.wg)(),(0,a.j4)(oe,{key:1,id:"email",modelValue:q.v$.email.$model,"onUpdate:modelValue":l[2]||(l[2]=e=>q.v$.email.$model=e),filter:!0,showClear:!0,optionLabel:"destination_en",options:q.directions,class:(0,i.C_)({"p-invalid":q.v$.email.$invalid&&q.submitted})},null,8,["modelValue","options","class"])):((0,a.wg)(),(0,a.j4)(oe,{key:2,id:"email",modelValue:q.v$.email.$model,"onUpdate:modelValue":l[3]||(l[3]=e=>q.v$.email.$model=e),filter:!0,showClear:!0,optionLabel:"destination_fr",options:q.directions,class:(0,i.C_)({"p-invalid":q.v$.email.$invalid&&q.submitted})},null,8,["modelValue","options","class"])),(0,a._)("label",{for:"email",class:(0,i.C_)({"p-error":q.v$.email.$invalid&&q.submitted})},"E-mail interne",2)]),q.v$.email.$invalid&&q.submitted||q.v$.email.$pending.$response?((0,a.wg)(),(0,a.iD)("small",w,(0,i.zw)(q.v$.email.required.$message.replace("Value","email")),1)):(0,a.kq)("",!0)])):(0,a.kq)("",!0),(0,a._)("div",y,[(0,a._)("span",$,[(0,a.Wm)(ne,{id:"Subject",modelValue:q.v$.subject.$model,"onUpdate:modelValue":l[4]||(l[4]=e=>q.v$.subject.$model=e),class:(0,i.C_)({"p-invalid":q.v$.subject.$invalid&&q.submitted})},null,8,["modelValue","class"]),"ar"==q.localeLang?((0,a.wg)(),(0,a.iD)("label",{key:0,for:"Subject",class:(0,i.C_)({"p-error":q.v$.subject.$invalid&&q.submitted})},"الموضوع",2)):"fr"==q.localeLang?((0,a.wg)(),(0,a.iD)("label",{key:1,for:"Subject",class:(0,i.C_)({"p-error":q.v$.subject.$invalid&&q.submitted})},"Objet",2)):((0,a.wg)(),(0,a.iD)("label",{key:2,for:"Subject",class:(0,i.C_)({"p-error":q.v$.subject.$invalid&&q.submitted})},"Subject",2))]),q.v$.subject.$invalid&&q.submitted||q.v$.subject.$pending.$response?((0,a.wg)(),(0,a.iD)("small",k,(0,i.zw)(q.v$.subject.required.$message.replace("Value","Subject")),1)):(0,a.kq)("",!0)]),(0,a._)("div",C,["ar"==q.localeLang?((0,a.wg)(),(0,a.iD)("span",{key:0,class:(0,i.C_)(["p-label",{"p-error":q.v$.content.$invalid&&q.submitted}])},"الرسالة",2)):"fr"==q.localeLang?((0,a.wg)(),(0,a.iD)("span",{key:1,class:(0,i.C_)(["p-label",{"p-error":q.v$.content.$invalid&&q.submitted}])},"Message",2)):((0,a.wg)(),(0,a.iD)("span",{key:2,class:(0,i.C_)(["p-label",{"p-error":q.v$.content.$invalid&&q.submitted}])},"Message",2)),(0,a.Wm)(re,{modelValue:q.v$.content.$model,"onUpdate:modelValue":l[5]||(l[5]=e=>q.v$.content.$model=e),editorStyle:"height: 320px",class:(0,i.C_)({"p-invalid":q.v$.content.$invalid&&q.submitted})},{toolbar:(0,a.w5)((()=>[(0,a._)("span",h,["ar"==q.localeLang?(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",j,D)),[[pe,"Headers",void 0,{bottom:!0}]]):"fr"==q.localeLang?(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",L,V)),[[pe,"Headers",void 0,{bottom:!0}]]):(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",S,x)),[[pe,"Headers",void 0,{bottom:!0}]])]),H,(0,a._)("span",B,[(0,a.wy)((0,a._)("button",A,null,512),[[pe,"Bold",void 0,{bottom:!0}]]),(0,a.wy)((0,a._)("button",W,null,512),[[pe,"Italic",void 0,{bottom:!0}]]),(0,a.wy)((0,a._)("button",O,null,512),[[pe,"Underline",void 0,{bottom:!0}]]),(0,a.wy)((0,a._)("button",z,null,512),[[pe,"Order List",void 0,{bottom:!0}]]),(0,a.wy)((0,a._)("button",M,null,512),[[pe,"Unorder List",void 0,{bottom:!0}]]),(0,a.wy)((0,a._)("button",N,null,512),[[pe,"Adjust",void 0,{bottom:!0}]]),(0,a.wy)((0,a._)("button",F,null,512),[[pe,"Link",void 0,{bottom:!0}]])])])),_:1},8,["modelValue","class"]),q.v$.content.$invalid&&q.submitted||q.v$.content.$pending.$response?((0,a.wg)(),(0,a.iD)("small",P,(0,i.zw)(q.v$.content.required.$message.replace("Value","Content")),1)):(0,a.kq)("",!0)]),(0,a._)("div",I,[(0,a._)("span",T,[(0,a._)("input",{class:"fileupload",type:"file",name:"files[]",accept:"image/*,.pdf,.doc,.docx,.xls",id:"files",onChange:l[6]||(l[6]=e=>q.UploadImage(e)),draggable:"true",multiple:""},null,32),"ar"==q.localeLang?((0,a.wg)(),(0,a.iD)("label",K,Z)):"fr"==q.localeLang?((0,a.wg)(),(0,a.iD)("label",X,Q)):((0,a.wg)(),(0,a.iD)("label",ee,ae))])]),(0,a._)("div",se,[q.imageSizeError?((0,a.wg)(),(0,a.j4)(ce,{key:0,for:"logo",severity:"error"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(q.imageSizeError),1)])),_:1})):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(q.files,((e,l)=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(ue,{key:l,class:"mb-2 mr-1",style:{cursor:"pointer",padding:"10px"}},{default:(0,a.w5)((()=>[(0,a._)("i",{class:(0,i.C_)("image"==e.type.split("/")[0]?"pi pi-image":"vnd.ms-excel"==e.type.split("/")[1]?"pi pi-file-excel":"pdf"==e.type.split("/")[1]?"pi pi-file-pdf":"pi pi-file")},null,2),(0,a.Uk)("  "+(0,i.zw)(e.name.substring(0,3)+"... "+q.niceBytes(e.size))+"    ",1),(0,a._)("i",{class:"pi pi-times-circle",onClick:e=>q.removeFileFromFiles(l)},null,8,ie)])),_:2},1024)),[[pe,"Click to remove","bottom"]]))),128))])])),_:1},8,["visible","header"]),(0,a.Wm)(me)])],64)}var ne=t(2587),re=t(4028),ce=t(2262),ue=t(3907),de=t(7877),me=t(2201),pe=t(1039),_e=t(9201),ve=JSON.parse('[{"id":1,"destination_ar":"الأمين العام","destination_fr":"Chertouh jugurtha","destination_en":"Chertouh jugurtha","email":"chertouhjugurtha@gmail.com","tel":null,"enabled_cellule_ecoute":1,"password":null},{"id":1,"destination_ar":"","destination_fr":"Rabah ","destination_en":"Rabah","email":"raitramdane@protonmail.com","tel":null,"enabled_cellule_ecoute":1,"password":null},{"id":1,"destination_ar":"","destination_fr":"Anis ","destination_en":"anis","email":"pinpillo4@gmail.com","tel":null,"enabled_cellule_ecoute":1,"password":null}]'),be={name:"Messages",setup(){const e=(0,ue.oR)(),l=(0,_e.p)(),t=(0,me.yj)(),s=(0,ce.iH)(!1),i=(0,ce.iH)(!1),o=(0,pe.N)(),n=(0,ce.iH)(""),r=(0,ce.qj)({ar:{add_t:"إضافة",username_t:"إسم المستخدم",firstname_t:"الإسم",lastname_t:"اللقب",mobile_t:"الهاتف",email_t:"البريد الإلكتروني",create_at_t:"سجل في",actions_t:"العمليات",listOfUsers_t:"قائمة المستخدمين",users_t:"المستخدمين",wilaya_t:"الولاية",commune_t:"البلدية",verifyEmail_t:"تأكيد البريد الإلكتروني؟",save_t:"حفظ",cancel_t:"إلغاء",details_t:"التفاصيل",lock_t:"قفل",unlock_t:"الغاء القفل",setEntreprise_t:"منح شركة",setPassword_t:"وضع كلمة السر",delete_t:"حذف",temporary_t:"مؤقت",password_t:"كلمة السر",confirmPassword_t:"تأكيد كلمة السر",clear_t:"مسح",select_role_to_filter:"إختر دور للبحث",keyword_search_t:"بحث بكلمة مفتاحية",address_t:"العنوان",role_t:"الدور",set_user_password:"تعيين كلمة مرور المستخدم",user_details:"تفاصيل المستخدم",set_entreprise_to_user:"تعيين المؤسسة على المستخدم",add_new_user:"إضافة مستخدم جديد",entreprises_t:"الشركات"},en:{add_t:"Add",username_t:"Username",firstname_t:"Firstname",lastname_t:"Lastname",mobile_t:"Mobile",email_t:"Email",create_at_t:"Created at",actions_t:"Actions",listOfUsers_t:"List of users",users_t:"Users",wilaya_t:"Wilaya",commune_t:"Commune",verifyEmail_t:"Verify email?",save_t:"Save",cancel_t:"Cancel",details_t:"Details",lock_t:"Lock",unlock_t:"Unlock",setEntreprise_t:"Set entreprise",setPassword_t:"Set password",delete_t:"Delete",temporary_t:"Temporary",password_t:"Password",confirmPassword_t:"Confirm password",clear_t:"Clear",select_role_to_filter:"Select role to filter",keyword_search_t:"Keyword search",address_t:"Address",role_t:"Role",set_user_password:"Set user password",user_details:" User details",set_entreprise_to_user:"Set entreprise to user",add_new_user:"Add new user",entreprises_t:"Companies"},fr:{add_t:"Ajouter",username_t:"Nom d'utilisateur",firstname_t:"Prénom",lastname_t:"Nom",mobile_t:"Mobile",email_t:"Email",create_at_t:"Créé à",actions_t:"Actions",listOfUsers_t:"Liste des utilisateurs",users_t:"Utilisateurs",wilaya_t:"Wilaya",commune_t:"Commune",verifyEmail_t:"Vérifier l'email?",save_t:"Enregistrer",cancel_t:"Annuler",details_t:"Détails",lock_t:"Verrouiller",unlock_t:"Ouvrir",setEntreprise_t:"Attribué entreprise",setPassword_t:"Définir le mot de passe",delete_t:"Supprimer",temporary_t:"Temporaire",password_t:"Mot de passe",confirmPassword_t:"Confirmer le mot de passe",clear_t:"Vider",select_role_to_filter:"Sélectionnez le rôle à filtrer",keyword_search_t:"Recherche par mot clé",address_t:"Adresse",role_t:"Role",set_user_password:"Définir le mot de passe utilisateur",user_details:"Détails de l'utilisateur",set_entreprise_to_user:"Définir l'entreprise en utilisateur",add_new_user:"Ajouter un nouvel utilisateur",entreprises_t:"Entreprises"}}),c=(0,ce.iH)(localStorage.getItem("localeLang")),u=(0,ce.qj)("ar"==c.value?r.ar:"fr"==c.value?r.fr:r.en),d=(0,ce.qj)({email:"",subject:"",content:""}),m={email:{required:ne.C1},subject:{required:ne.C1,minLength:(0,ne.Ei)(4),maxLength:(0,ne.BS)(100)},content:{required:ne.C1,minLength:(0,ne.Ei)(4)}},p=(0,ce.iH)(!1),_=(0,re.Xw)(m,d),v=(0,ce.iH)("");function b(e,l){s.value=!e,v.value=l}const g=(0,ce.iH)(""),f=((0,ce.iH)([]),(0,ce.iH)([])),w=(0,ce.iH)(0);function y(e){if(e.target.files[0].size>1024e3)w.value="Image Size is too big, please provide a logo less thent 200 KB";else for(var l=0;l<e.target.files.length;l++)f.value.push(e.target.files[l])}const $=(0,ce.iH)(),k=(0,ce.iH)([]);var C=(0,ce.iH)("");const h=e=>{console.log(e.query),setTimeout((()=>{e.query.trim().length?$.value=k.value.filter((l=>(console.log("999999",l),l.emailClient.toLowerCase().includes(e.query.toLowerCase())))):$.value=[...k.value]}),500)};function j(e){const l=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];let t=0,a=parseInt(e,10)||0;while(a>=1024&&++t)a/=1024;return a.toFixed(a<10&&t>0?1:0)+" "+l[t]}function q(e){f.value.splice(e,1)}function D(e){"en"==c.value?o.require({message:"Are you sure you want to delete this information?",header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptLabel:"Yes",rejectLabel:"No",acceptClass:"p-button-danger",accept:()=>{Object.assign(d,{email:"",subject:"",content:""}),f.value=[],s.value=!e,l.add({severity:"success",summary:"Successful",detail:"Operation canceled",life:1e3})},reject:()=>{}}):"fr"==c.value?o.require({message:"Êtes-vous sûr de vouloir supprimer ces informations?",header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptLabel:"Oui",rejectLabel:"No",acceptClass:"p-button-danger",accept:()=>{Object.assign(d,{email:"",subject:"",content:""}),f.value=[],s.value=!e,l.add({severity:"success",summary:"Succès",detail:"Opération annulée",life:1e3})},reject:()=>{}}):"ar"==c.value&&o.require({message:"هل أنت متأكد أنك تريد حذف هذه المعلومات?",header:"التأكيد",icon:"pi pi-exclamation-triangle",acceptLabel:"نعم",rejectLabel:"لا",acceptClass:"p-button-danger",accept:()=>{Object.assign(d,{email:"",subject:"",content:""}),f.value=[],s.value=!e,l.add({severity:"success",summary:"تم بنجاح",detail:"تم إلغاء العملية",life:1e3})},reject:()=>{}})}function L(){if(_.value.$invalid)p.value=!0;else{const a=new FormData;if(a.append("email","clients"==v.value?d.email.emailClient:d.email.email),a.append("subject",d.subject),a.append("content",d.content),a.append("sender",e.state.user.id),a.append("reciever",e.state.user.id),f.value.length>0)for(var t=0;t<f.value.length;t++)a.append("files",f.value[t]);Object.assign(d,{email:"",subject:"",content:""}),_.value.$reset(),f.value=[],s.value=!1,de.Z.post("/messages/",a,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{l.add({severity:"success",summary:"success",detail:"Message envoyer avec succé",life:1e3})})).catch((e=>{console.log(e),l.add({severity:"error",summary:"error",detail:e.response.data.message,life:1e3})}))}}function U(e){_.value.email.$model="object"===typeof e.value?e.value.emailClient:""}return(0,a.bv)((()=>{de.Z.get("/clients/?canvas=true").then((e=>{k.value=e.data.results})).catch((e=>{console.log(e.response.data)}))})),(0,a.Xn)((()=>{g.value=t.name})),{compose:s,openComposeDialog:b,messageContent:n,setNewMessage:L,localeLang:c,nameroot:g,...(0,ce.BK)(u),...(0,ce.BK)(d),submitted:p,v$:_,confirm:o,directions:ve,filteredClients:$,search:h,clients:k,changeSelected:U,emailValue:C,typeEmail:v,UploadImage:y,niceBytes:j,imageSizeError:w,files:f,removeFileFromFiles:q,showDetails:i,cancelCompose:D}}},ge=t(3744);const fe=(0,ge.Z)(be,[["render",oe]]);var we=fe}}]);
//# sourceMappingURL=504.39f656f8.js.map