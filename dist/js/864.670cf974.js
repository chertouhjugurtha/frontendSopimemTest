"use strict";(self["webpackChunksopimem"]=self["webpackChunksopimem"]||[]).push([[864],{3864:function(e,a,l){l.r(a),l.d(a,{default:function(){return M}});var t=l(6252),n=l(3577),o=l(9963);const i={class:"stepsdemo-content"},s=(0,t.Uk)("Fiche Client"),u={class:"p-fluid grid"},c={class:"field col-6"},r={class:"p-float-label"},p={class:"country-item"},d={class:"ml-2"},m=(0,t._)("label",{for:"name"},"Nom résidance ",-1),v={class:"field col-6"},f={class:"p-float-label"},g=(0,t._)("label",{for:"name"},"Choisissez ... ",-1),_={class:"field col-6"},h={class:"p-float-label"},y={class:"country-item"},w={class:"ml-2"},b=(0,t._)("label",{for:"func"},"Place de Stationnement",-1),L={class:"p-float-label"},S={class:"country-item"},C={class:"ml-2"},H=(0,t._)("label",{for:"prenom"},"Lot N°",-1),x={class:"field col-6"},A={class:"p-float-label"},V={class:"country-item"},R={class:"ml-2"},k=(0,t._)("label",{for:"prenom"},"Lot N°",-1),D={class:"field col-6"},P={class:"p-float-label"},B=(0,t._)("label",{for:"name"},"Type ",-1),T={class:"field col-6"},W={class:"p-float-label"},F=(0,t._)("label",{for:"name"},"Etage ",-1),E={class:"field col-6"},I={class:"p-float-label"},N=(0,t._)("label",{for:"name"},"Superficier ",-1),Z={class:"grid grid-nogutter justify-content-between"},U=(0,t._)("i",null,null,-1);function z(e,a,l,z,O,q){const j=(0,t.up)("Divider"),G=(0,t.up)("AutoComplete"),J=(0,t.up)("Dropdown"),K=(0,t.up)("InputText"),M=(0,t.up)("Button"),Q=(0,t.up)("Card");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t.Wm)(Q,null,{title:(0,t.w5)((()=>[(0,t.Wm)(j,{align:"center",type:"dotted"},{default:(0,t.w5)((()=>[s])),_:1})])),content:(0,t.w5)((()=>[(0,t._)("div",u,[(0,t._)("div",c,[(0,t._)("span",r,[(0,t.Wm)(G,{modelValue:z.selectResidence,"onUpdate:modelValue":a[0]||(a[0]=e=>z.selectResidence=e),onOnDropdownClick:a[1]||(a[1]=e=>z.searchResidence(e)),dropdown:!0,suggestions:z.filteredResidences,options:z.residanceClass,onComplete:a[2]||(a[2]=e=>z.searchResidence(e)),onChange:a[3]||(a[3]=e=>z.searchResidence(e)),optionLabel:"designation"},{item:(0,t.w5)((e=>[(0,t._)("div",p,[(0,t._)("div",d,(0,n.zw)(e.item.designation),1)])])),_:1},8,["modelValue","suggestions","options"]),m])]),(0,t.wy)((0,t._)("div",v,[(0,t._)("span",f,[(0,t.Wm)(J,{id:"dropdown",modelValue:z.type_choisie,"onUpdate:modelValue":a[4]||(a[4]=e=>z.type_choisie=e),options:z.type_class,onChange:a[5]||(a[5]=e=>z.functionShow(e)),optionLabel:""==z.type_class.label?"Appartement":"label"},null,8,["modelValue","options","optionLabel"]),g])],512),[[o.F8,z.showSelectProperiter]]),(0,t._)("div",_,[(0,t.wy)((0,t._)("span",h,[(0,t.Wm)(G,{modelValue:z.selectStationnement,"onUpdate:modelValue":a[6]||(a[6]=e=>z.selectStationnement=e),onOnDropdownClick:a[7]||(a[7]=e=>z.searchStationnement(e)),dropdown:!0,suggestions:z.filteredStationnement,options:z.Boxclass,onComplete:a[8]||(a[8]=e=>z.searchStationnement(e)),optionLabel:"num_place"},{item:(0,t.w5)((e=>[(0,t._)("div",y,[(0,t._)("div",w,(0,n.zw)(e.item.num_place),1)])])),_:1},8,["modelValue","suggestions","options"]),b],512),[[o.F8,z.stationnementBool]]),(0,t.wy)((0,t._)("span",L,[(0,t.Wm)(G,{modelValue:z.selectedLocale,"onUpdate:modelValue":a[9]||(a[9]=e=>z.selectedLocale=e),suggestions:z.filteredLocal,onOnDropdownClick:a[10]||(a[10]=e=>z.searchLocal(e)),onComplete:a[11]||(a[11]=e=>z.searchLocal(e)),options:z.Localesclass,dropdown:!0,field:"num_place",optionLabel:"num_place"},{item:(0,t.w5)((e=>[(0,t._)("div",S,[(0,t._)("div",C,(0,n.zw)(e.item.num_place),1)])])),_:1},8,["modelValue","suggestions","options"]),H],512),[[o.F8,z.localBool]])]),(0,t._)("div",x,[(0,t.wy)((0,t._)("span",A,[(0,t.Wm)(G,{modelValue:z.selectedLot,"onUpdate:modelValue":a[12]||(a[12]=e=>z.selectedLot=e),suggestions:z.filteredLot,onComplete:a[13]||(a[13]=e=>z.searchLotapp(e)),onOnDropdownClick:a[14]||(a[14]=e=>z.searchLotapp(e)),dropdown:!0,onChange:a[15]||(a[15]=e=>z.selectedAppartement(e)),field:"num_lot",options:z.Appartementclass,optionLabel:"num_lot"},{item:(0,t.w5)((e=>[(0,t._)("div",V,[(0,t._)("div",R,(0,n.zw)(e.item.num_lot),1)])])),_:1},8,["modelValue","suggestions","options"]),k],512),[[o.F8,z.appartementBool]])]),(0,t.wy)((0,t._)("div",D,[(0,t._)("span",P,[(0,t.Wm)(K,{disabled:!0,id:"name",modelValue:z.newAppartement.type,"onUpdate:modelValue":a[16]||(a[16]=e=>z.newAppartement.type=e)},null,8,["modelValue"]),B])],512),[[o.F8,z.appartementBool]]),(0,t.wy)((0,t._)("div",T,[(0,t._)("span",W,[(0,t.Wm)(K,{disabled:!0,id:"name",modelValue:z.newAppartement.etage,"onUpdate:modelValue":a[17]||(a[17]=e=>z.newAppartement.etage=e)},null,8,["modelValue"]),F])],512),[[o.F8,z.appartementBool]]),(0,t.wy)((0,t._)("div",E,[(0,t._)("span",I,[(0,t.Wm)(K,{disabled:!0,id:"name",modelValue:z.newAppartement.superficier,"onUpdate:modelValue":a[18]||(a[18]=e=>z.newAppartement.superficier=e)},null,8,["modelValue"]),N])],512),[[o.F8,z.appartementBool]])])])),footer:(0,t.w5)((()=>[(0,t._)("div",Z,[(0,t.Wm)(M,{label:"Back",onClick:a[19]||(a[19]=e=>z.prevPage1()),icon:"pi pi-angle-left"}),U,(0,t.Wm)(M,{label:"Suivant",onClick:z.nextPage1,icon:"pi pi-angle-right",iconPos:"right"},null,8,["onClick"])])])),_:1})])}var O=l(2262),q=l(6358),j=(l(381),l(7877)),G={emits:["nextpage","prevpage"],setup(e,{emit:a}){const l=(0,O.iH)(!1),t=(0,O.iH)(!1),n=(0,O.iH)(!1),o=(0,O.iH)(!1),i=(0,O.iH)(!1),s=(0,O.iH)({designation:"",id:""}),u=(0,O.iH)(""),c=(0,O.iH)(""),r=(0,O.iH)(""),p=(0,O.iH)(""),d=(0,O.iH)(""),m=(0,O.iH)(""),v=(0,O.iH)(),f=(0,O.iH)(),g=(0,O.iH)(),_=(0,O.iH)(),h=(0,O.iH)(),y=(0,O.iH)({label:"",value:""}),w=(0,O.iH)([{label:"Appartement",value:"AP"},{label:"Place de Stationnement",value:"PS"},{label:"Locale",value:"LC"}]),b=(0,O.iH)({selectResidence:"",selectStationnement:"",prix_ht:"",etage:"",type:"",superficier:"",num_lot:""}),L=(0,O.iH)({}),S=(0,O.iH)({}),C=(0,O.iH)({nomResidence:"",biens:"",etage:"",type:"",superficier:"",numLot:"",numLocale:"",placeStationnement:"",contratDate:(new Date).toLocaleDateString("en-GB")}),H=(0,O.qj)([{nomResidence:"Bella vista",biens:"ddffff",type:"F3",numLot:1,placeStationnement:"100",contratDate:"02-07-2020"},{nomResidence:"Foresta",biens:"mmmmm",type:"F5",numLot:2,placeStationnement:"50",contratDate:"18-12-2018"},{nomResidence:"Bella vista",biens:"dsdxz",type:"F3",numLot:3,placeStationnement:"20",contratDate:"20-07-2020"}]),x=(0,O.iH)(null),A=(0,O.iH)([{field:"biens",header:"Type du Biens"},{field:"type",header:"Type"},{field:"numLot",header:"Numéro du Lot"},{field:"numLocale",header:"Numéro du Locale"},{field:"placeStationnement",header:"Place de Stationnement"},{field:"contratDate",header:"Date Du Contrat"}]),V=(0,O.iH)(A.value),R=(0,O.iH)(""),k=(0,O.iH)([]);function D(){j.Z.get("/residence/").then((e=>{k.value=[],e.data.results.forEach((e=>{k.value.push({designation:e.designation,id:e.id})}))})).catch((e=>{errormessage.value=e.response.data,console.log(errormessage.value.nom),toast.add({severity:"error",summary:"Error",detail:"unable to create new gerant : "+e.message+" :\n"+errormessage.value,life:4e3})}))}const P=(0,O.iH)([]),B=(0,O.iH)([]),T=(0,O.iH)([]);function W(e){""!=s.value.designation&&(i.value=!0);let a=e.query,l=[],t=q.iZ.filter(k.value,["designation"],a,q.a6.STARTS_WITH);t&&t.length&&l.push(...t),v.value=l}function F(e){j.Z.get("/box/",{params:{residance:e.value.id}}).then((e=>{P.value=[],e.data.forEach((e=>{P.value.push({num_place:e.num_place,prix_ht:e.prix_ht,etage_place:e.etage,id:e.id})}))})).catch((e=>{errormessage.value=e.response.data,console.log(errormessage.value.nom),toast.add({severity:"error",summary:"Error",detail:"unable to create new gerant : "+e.message+" :\n"+errormessage.value,life:4e3})}))}function E(e){F(s);let a=e.query,l=[],t=q.iZ.filter(P.value,["num_place"],a,q.a6.STARTS_WITH);t&&t.length&&l.push(...t),h.value=l}function I(e){j.Z.get("/appartements/",{params:{residance:e.value.id}}).then((e=>{T.value=[],e.data.forEach((e=>{T.value.push({id:e.id,prix_ht:e.prix_ht,type:e.type,superficier:e.superficier,etage:e.etage,id:e.id,num_lot:e.num_lot})}))})).catch((e=>{errormessage.value=e.response.data,console.log(errormessage.value.nom),toast.add({severity:"error",summary:"Error",detail:"unable to create new gerant : "+e.message+" :\n"+errormessage.value,life:4e3})}))}const N=e=>{I(s);let a=e.query,l=[],t=q.iZ.filter(T.value,["num_lot"],a,q.a6.CONTAINS);t&&t.length&&l.push(...t),g.value=l},Z=e=>{b.value.id=e.value.id,b.value.type=e.value.type,b.value.superficier=e.value.superficier,b.value.etage=e.value.etage,b.value.prix_ht=e.value.prix_ht,b.value.num_lot=e.value.num_lot},U=e=>{j.Z.get("/locaux/",{params:{residance:s.value.id}}).then((e=>{B.value=[],e.data.forEach((e=>{B.value.push({num_place:e.num_place,prix_ht:e.prix_ht,etage_place:e.etage,id:e.id})}))})).catch((e=>{errormessage.value=e.response.data,console.log(errormessage.value.nom),toast.add({severity:"error",summary:"Error",detail:"unable to create new gerant : "+e.message+" :\n"+errormessage.value,life:4e3})}));let a=e.query,l=[],t=q.iZ.filter(B.value,["num_place"],a,q.a6.CONTAINS);t&&t.length&&l.push(...t),_.value=l};function z(e){console.log(e),"AP"==e.value.value&&(p.value="",F(s),t.value=!0,n.value=!0,o.value=!1),"PS"==e.value.value&&(p.value="",F(s),t.value=!1,n.value=!0,o.value=!1),"LC"==e.value.value&&(p.value="",t.value=!1,n.value=!1,o.value=!0)}function G(e){const a=H.findIndex((a=>a.nomResidence===e.nomResidence&&a.type===e.type&&a.numLot===e.numLot));H.splice(a)}function J(){l.value=!0}function K(){D(),C.value.nomResidence=s.value.residence,C.value.biens=y.value.label,C.value.type=u.value.type,C.value.etage=u.value.etage,C.value.superficier=u.value.superficier,C.value.numLot=c.value.lot,C.value.numLocale=r.value.num_lot,C.value.placeStationnement=p.value.num_place,H.push(C.value),C.value={},l.value=!1}async function M(){let e="";await j.Z.get("/facture-clients/get-num-facture/?type_fact="+y.value.value+"&limit=10").then((a=>{e=a.data.num_facture})).catch((e=>{console.log(e.response.data)}));let l={};switch(y.value.value){case"AP":if(l.value={},L.value={},S.value={},b.value.residance=s.value,b.value.num_place=p.value,b.value.type=d.value.type,b.value.prix_ht=d.value.prix_ht,b.value.num_lot=d.value.num_lot,delete b.value.selectResidence,delete b.value.selectStationnement,console.log("AP",b.value),l={appartement:b.value,type_choisie:"AP",num_facture:e},""==b.value.num_lot|void 0==b.value.num_lot|null==b.value.num_lot)break;a("nextpage",{formData:l,pageIndex:1});break;case"LC":if(l.value={},L.value={},b.value={},S.value.prix_ht=S.value.residance=s.value,S.value.num_place=m.value,console.log("LC",S.value),l={locale:S.value,type_choisie:"LC",num_facture:e},""==S.value.num_place|void 0==S.value.num_place|null==S.value.num_place)break;a("nextpage",{formData:l,pageIndex:1});break;case"PS":if(l.value={},S.value={},b.value={},L.value.residance=s.value,L.value.num_place=p.value,console.log("PS",L.value),l={box:L.value,type_choisie:"PS",num_facture:e},""==L.value.num_place|void 0==L.value.num_place|null==L.value.num_place)break;a("nextpage",{formData:l,pageIndex:1});break;default:break}}function Q(){a("prevpage",{pageIndex:1})}function X(e){let{newData:a,index:l}=e;H[l]=a}function Y(){}function $(e){V.value=A.value.filter((a=>e.includes(a)))}function ee(e){V=e.checked?H.map((e=>e.value)):[]}return D(),Y(),{stationnementBool:n,appartementBool:t,localBool:o,selectStationnement:p,showSelectProperiter:i,editing_rows:x,logements:H,selectedColumns:V,residanceClass:k,Boxclass:P,Localesclass:B,Appartementclass:T,columns:A,type_choisie:y,selectedSeat:R,type_class:w,filteredResidences:v,filteredType:f,filteredLot:g,filteredLocal:_,filteredStationnement:h,selectResidence:s,selectType:u,selectLot:c,selectLocal:r,selectedLot:d,selectedLocale:m,newAppartement:b,newBox:L,newLocale:S,nextPage1:M,prevPage1:Q,onRowEditSave:X,getResidances:D,searchResidence:W,searchLocal:U,searchLotapp:N,searchStationnement:E,selectedAppartement:Z,onSelectAllChange:ee,onToggle:$,functionShow:z,openNew:J,new_contrat:C,addClient:K,DeleteC:G,addBiens:l}}},J=l(3744);const K=(0,J.Z)(G,[["render",z]]);var M=K}}]);
//# sourceMappingURL=864.670cf974.js.map